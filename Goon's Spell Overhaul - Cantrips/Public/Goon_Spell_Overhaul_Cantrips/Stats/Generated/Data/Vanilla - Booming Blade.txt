// ==================================== Booming Blade ====================================
// Bug Fix: Added missing Thunder "DamageType". 
// Changes: The vanilla cantrip inherits from the 5e Spells version.

new entry "Target_BoomingBlade_ClassSpell"
type "SpellData"
data "SpellType" "Target"
// using "Target_BoomingBlade"
using "Target_BoomingBlade_5e"
// data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);CastOffhand[GROUND:DealDamage(OffhandMeleeWeapon, OffhandMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(OffHand)];IF(not Player(context.Source)):ApplyStatus(SELF,AI_HELPER_EXTRAATTACK,100,1);ApplyStatus(SELF,BOOMINGBLADE_BLOCK,100,1);"
// data "RequirementConditions" "CanUseWeaponActions() and IsProficientWithEquippedWeapon() and not  HasStatus('BOOMINGBLADE_BLOCK');"
// data "RequirementEvents" "OnSourceStatusApplied;OnStatusRemoved"
// data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4)):ApplyStatus(BOOMING_BLADE,100,1);IF(CharacterLevelGreaterThan(4) and not CharacterLevelGreaterThan(10)):ApplyStatus(BOOMING_BLADE_5,100,1);IF(CharacterLevelGreaterThan(10)):ApplyStatus(BOOMING_BLADE_11,100,1);IF(CharacterLevelGreaterThan(4)):DealDamage(LevelMapValue(BoomingBlade),Thunder);DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);ExecuteWeaponFunctors(MainHand);ApplyStatus(BOOMINGBLADE_BLOCK,100,1);"
// data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4)):ApplyStatus(BOOMING_BLADE,100,1);IF(CharacterLevelGreaterThan(4) and not CharacterLevelGreaterThan(10)):ApplyStatus(BOOMING_BLADE_5,100,1);IF(CharacterLevelGreaterThan(10)):ApplyStatus(BOOMING_BLADE_11,100,1);IF(CharacterLevelGreaterThan(4)):DealDamage(LevelMapValue(BoomingBlade),Thunder,,,0,,true,true);DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);ExecuteWeaponFunctors(MainHand);ApplyStatus(BOOMINGBLADE_BLOCK,100,1);"
// data "Icon" "Spell_Evocation_BoomingBlade"
// data "DescriptionParams" "DealDamage(LevelMapValue(D8Cantrip),Thunder);"
// data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);DealDamage(LevelMapValue(BoomingBlade),Thunder)"
data "DamageType" "Thunder"

new entry "Target_BoomingBlade"
type "SpellData"
data "SpellType" "Target"
// using "Target_Slash_New"
using "Target_BoomingBlade_5e"
// data "SpellSchool" "Evocation"
// data "Cooldown" ""
// data "SpellSuccess" "ApplyStatus(BOOMING_BLADE,100,1);DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
// data "Icon" "unknown"
// Booming Blade
// data "DisplayName" "h78c417cag2696g4c50gaca1gfd7e81feefb3;2"
// Strike with your weapon, afflicting your foe with a resonance that hurts them for [1] when they move.
// data "Description" "h9f5e7b5agb7c5g4952gb88cg713ff1d09bbb;4"
// data "DescriptionParams" "DealDamage(1d8, Thunder)"
// data "ExtraDescription" ""
// data "TooltipAttackSave" "MeleeWeaponAttack"
// data "TooltipStatusApply" "ApplyStatus(BOOMING_BLADE,100,1)"
// data "PrepareSound" "Spell_Prepare_Sorcerer_BoomingBlade"
// data "PrepareLoopSound" "Spell_Loop_Sorcerer_BoomingBlade_Start"
// data "TargetSound" "Spell_Impact_Damage_Thunder_ThunderousSmite_L1to3"
// data "SpellFlags" "IsMelee;IsHarmful;IsDefaultWeaponAction;IsSpell"
// data "PrepareEffect" "da2ac9fb-af83-4650-acfe-514a425c3a2e"
// data "TargetEffect" "288e0f80-7d7c-4f36-b748-17182318180e"
data "DamageType" "Thunder"

// ==================================== Booming Blade - Blasting Blade ???

// new entry "Target_BoomingBladeEx"
// type "SpellData"
// data "SpellType" "Target"
// using "Target_BoomingBlade"
// data "SpellSuccess" "IF(not SavingThrow(Ability.Strength, ManeuverSaveDC())):Force(4.5);ApplyStatus(BOOMING_BLADE,100,1);DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
// Blasting Blade
// data "DisplayName" "h5fb228eag8f75g49eagab20g740b2b11433a;2"
// Strike with your weapon, afflicting your foe with a resonance that hurts them for [1] when they move and possibly pushing them back [2].
// data "Description" "hc9c9f16egfcf1g408cg9abbg8398527b7331;4"
// data "DescriptionParams" "Distance(4.5);DealDamage(1d8, Thunder)"
// data "ExtraDescription" ""
// data "TooltipAttackSave" "MeleeWeaponAttack;Strength"
// data "TargetSound" "Spell_Impact_Sorcerer_BoomingBlade"